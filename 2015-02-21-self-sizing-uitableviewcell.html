<!doctype html> <html> <head> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="https://mariusc.github.io/feed.xml"> <meta name=language content=en> <meta name=description content="Personal website of Marius Constantinescu"> <meta name=author content="Marius Constantinescu"> <meta content="Marius Constantinescu" itemprop=name> <meta content="https://mariusc.github.io/" itemprop=url> <meta content="iOS developer at Nodes Copenhagen. Continuously learning iOS development, making awesome apps for iPhone, iPad and Apple TV and writing about it as I do" itemprop=about> <meta content="iOS developer at Nodes Copenhagen. Continuously learning iOS development, making awesome apps for iPhone, iPad and Apple TV and writing about it as I do" itemprop=description> <meta content="Marius Constantinescu" property="og:site_name"> <meta content="Marius Constantinescu" property="og:title"> <meta content="https://mariusc.github.io/" property="og:url"> <meta content=website property="og:type"> <meta content="iOS developer at Nodes Copenhagen. Continuously learning iOS development, making awesome apps for iPhone, iPad and Apple TV and writing about it as I do" property="og:description"> <meta content=summary name="twitter:card"> <meta content="@marius_const" name="twitter:site"> <meta content="@marius_const" name="twitter:creator"> <meta content="Marius Constantinescu" name="twitter:title"> <meta content="iOS developer at Nodes Copenhagen. Continuously learning iOS development, making awesome apps for iPhone, iPad and Apple TV and writing about it as I do" name="twitter:description"> <title>Self sizing UITableViewCells - Marius Constantinescu</title> <link href="/css/bootstrap.min.css?1550338907" rel=stylesheet /><link href="/css/clean-blog.css?1550338907" rel=stylesheet /> <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel=stylesheet> <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel=stylesheet> <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel=stylesheet> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45800859-1', 'mariusc.github.io');
  ga('send', 'pageview');

</script> </head> <body> <nav class="navbar navbar-default navbar-custom navbar-fixed-top"> <div class=container-fluid> <div class="navbar-header page-scroll"> <button type=button class=navbar-toggle data-toggle=collapse data-target="#bs-example-navbar-collapse-1"> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> </div> <div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1> <ul class="nav navbar-nav navbar-right"> <li> <a href="index.html">About</a> </li> <li> <a href="blog.html">Blog</a> </li> <li> <a href="portfolio.html">Portfolio</i></a> </li> <li> <a href="feed.xml"><i class="fa fa-rss-square"></i></a> </li> </ul> </div> </div> </nav> <header class=intro-header id=image-header style="background-image: url('/img/blogposts/mons_klint.JPG');"> <div class=container> <div class=row> <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <div class=post-heading> <h1>Self sizing UITableViewCells</h1> </div> </div> </div> </div> </header> <article> <div class=container> <div class=row> <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <article> <p>Among all the new features brought by iOS 8, and the launching of Swift, there was also a minor thing that not many people talked about. iOS 8 brought auto-sizing table cells.</p> <p>This is probably one of the iOS 8 features I was most excited about. Probably everyone who developed an iOS app has used a UITableView. It&rsquo;s one of the most basic and most used components. And we all know the pain of computing the <code>tableView:heightForRowAtIndexPath:</code> for custom cells with different heights depending, for example, on the data you get from an API. And then, setting frames by hand in the <code>layoutSubviews</code> in the UITableViewCell. It probably never was a good approach, but I&rsquo;ve seen code like that and I&rsquo;ve written code like that (not proud of it).</p> <p>Then, Auto Layout came along, and we had a way to get rid of all the frame computing in the <code>layoutSubivews</code> in the cell. But we still had to compute the height of the cell in the view controller, and the only way I found to make Auto Layout work well with dynamically sized cells was to actually instantiate a table cell in <code>heightForRowAtIndexPath</code> and use it just for sizing the cell. Not very nice.</p> <p>iOS 8 is the one that finally brings us a good solution: self-sizing cells. In other words, if you add the right Auto Layout constraints in your cells, you won&rsquo;t have to tell the tableView the height of the cells, but he will know to get it himself.</p> <p>Before jumping with joy, please note that this is only possible in iOS 8. So if you have to support iOS 7 as well, this is not a good solution for you.</p> <p>I created a small project, to test this new feature. We have a <code>UITableView</code> with custom cells. The data for the it will be fetched as a JSON from <a href="https://api.myjson.com/bins/3x4p3">here</a>. I&rsquo;m not going in details about fetching data from a URL or parsing a JSON to custom objet, these are pretty basic things and don&rsquo;t make the object of this article. </p> <p>The key to get auto-resizing cells is to set the constraints inside the cell in the right way.</p> <p><center><img src="img/blogposts/inline/self_sizing_cells_cell.png" class=img-responsive /></center></p> <p>TitleLabel is pinned to top, left, right and has the bottom pinned to the nearest neightbour (the imageView). The UIImageView is pinned to the left, right, has the height set and its botton is pinned to the nearest neighbour (the DetailLabel). The DetailLabel is pinned to left, right and the bottom is pinned to the bottom of the cell.</p> <p>That&rsquo;s it. This is all. You don&rsquo;t have to do anything else. Well, of course, set you tableView delegate and datasource, return the cell for each row, the nubmer of rows and that&rsquo;s it. No <code>heightForRowAtIndexPath</code>. And make sure you don&rsquo;t set any Row Height for the table view in the storyboard. Leave it the default (which is 44). Setting it to anything else seems to make all the cells that size.</p> <p>You can find the demo project on <a href="https://github.com/mariusc/SelfSizingCells">my GitHub</a>. Don&rsquo;t try running it on iOS 7, because it will crash (conflicting constraints; it assumes the height is 44, but the inner constraints of the cell make its size to be much bigger; so it crashes).</p> <p>I think the self sizing cells are a big step forward and I&rsquo;m looking forward to have an iOS 8 - only app, so I can actually use them in production.</p> </article> <hr> <span class=meta>Posted on February 21, 2015</span> <hr/> </div> </div> </div> <hr> <footer> <div class=container> <div class=row> <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <ul class="list-inline text-center"> <li> <a href="http://twitter.com/marius_const" title=Twitter> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="http://github.com/mariusc" title=GitHub> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="http://www.linkedin.com/in/constantinescumarius" title=LinkedIn> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="http://stackoverflow.com/users/2912892/marius-constantinescu" title=GitHub> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i> </span> </a> </li> </ul> </div> </div> </div> </footer> <script src="/js/jquery.min.js?1550338909"></script> <script src="/js/bootstrap.min.js?1550338909"></script> <script src="/js/clean-blog.min.js?1550338909"></script> </body> </html>