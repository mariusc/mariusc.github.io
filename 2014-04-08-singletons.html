<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="https://mariusc.github.io/feed.xml">

<meta name="language" content="en">

<meta name="description" content="Personal website of Marius Constantinescu">
<meta name="author" content="Marius Constantinescu">

<meta content="Marius Constantinescu" itemprop="name">
<meta content="https://mariusc.github.io/" itemprop="url">
<meta content="iOS developer at Nodes Copenhagen. Continuously learning iOS development, making awesome apps for iPhone, iPad and Apple TV and writing about it as I do" itemprop="about">
<meta content="iOS developer at Nodes Copenhagen. Continuously learning iOS development, making awesome apps for iPhone, iPad and Apple TV and writing about it as I do" itemprop="description">

<meta content="Marius Constantinescu" property="og:site_name">
<meta content="Marius Constantinescu" property="og:title">
<meta content="https://mariusc.github.io/" property="og:url">
<meta content="website" property="og:type">
<meta content="iOS developer at Nodes Copenhagen. Continuously learning iOS development, making awesome apps for iPhone, iPad and Apple TV and writing about it as I do" property="og:description">

<meta content="summary" name="twitter:card">
<meta content="@marius_const" name="twitter:site">
<meta content="@marius_const" name="twitter:creator">
<meta content="Marius Constantinescu" name="twitter:title">
<meta content="iOS developer at Nodes Copenhagen. Continuously learning iOS development, making awesome apps for iPhone, iPad and Apple TV and writing about it as I do" name="twitter:description">

<title>Singletons - Marius Constantinescu</title>

<!-- Bootstrap Core CSS -->
<!-- <link href="/css/bootstrap.min.css" rel="stylesheet"> -->

<!-- Custom CSS -->
<!-- <link href="/css/clean-blog.min.css" rel="stylesheet"> -->
<link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css" /><link href="/css/clean-blog.css" rel="stylesheet" type="text/css" />

<!-- Custom Fonts -->
<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<!--Google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45800859-1', 'mariusc.github.io');
  ga('send', 'pageview');

</script>
<!--End of Google Analytics-->
    <!--<title>Singletons</title>-->
  </head>
  <body>
    
    <!-- Navigation -->
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- <a class="navbar-brand" href="index.html">Marius 
                    <br>Constantinescu</a> -->
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="index.html">About</a>
                    </li>
                    <!-- <li>
                        <a href="about.html">About</a>
                    </li> -->
                    <li>
                        <a href="blog.html">Blog</a>
                    </li>
                    <li>
                        <a href="work.html">Work</a>
                    </li>
                    <li>
                        <a href="feed.xml"><i class="fa fa-rss-square"></i></a>
                    </li>
                    <!-- <li>
                        <a href="contact.html">Contact</a>
                    </li> -->
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Main Content -->
      <!-- Page Header -->
  <header class="intro-header" id="image-header" style="background-image: url('/img/blogposts/calanques.jpg');">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <div class="post-heading">
        <h1>Singletons</h1>
      </div>

      </div>
    </div>
  </div>
</header>

   

    <!-- Post Content -->
    <article>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <article>
          <p>I like Singletons. This was the first design pattern I learned while studying OOP and it&rsquo;s by far the one I&rsquo;m most comfortable with at this point. </p>

<p>In (almost) all my projects that need networking, I created a singleton NetworkManager, which handles all the network communication done throughout the app. I think that this is a very good example of a situation where a Singleton is useful.</p>

<h3 id="how-i-write-my-singletons">How I write my singletons</h3>

<p>If there&rsquo;s nothing fancy about the classes I want to be singletons, I simply include the following code in the <code>.pch</code> file:</p>
<pre class="highlight plaintext"><code>#ifndef SHARED_SINGLETON
    #define SHARED_SINGLETON(class)               \
    + (id)sharedInstance {                        \
        static dispatch_once_t pred = 0;          \
        __strong static id _shared##class = nil;  \
        dispatch_once(&amp;pred, ^{                   \
            _shared##class = [[self alloc] init]; \
        });                                       \
        return _shared##class;                    \
    }
#endif
</code></pre>

<p>Then, in the header file of the class I want to make a singleton, I add the function </p>
<pre class="highlight plaintext"><code>+ (id)sharedInstance;
</code></pre>

<p>And in the associated .m, </p>
<pre class="highlight plaintext"><code>SHARED_SINGLETON(Open311);
</code></pre>

<p>is the implementation of the sharedInstance method. From now on, every time I need this object, I call it with <code>[ClassName sharedObject]</code>.</p>

<p>Of course, if you need to do other things when fetching that Singleton, you need to add the method in your .m file and do it there.</p>

<h3 id="good-or-bad">Good or bad</h3>

<p>This is quite subjective, and depends really on how you use this pattern. It can be both good and bad. And it depends on how you write your singletons. ALWAYS use <code>dispatch_once</code> to instantiate your shared instance. The older method of <code>@synchronized</code> is also acceptable, although arguably slower. This way, you are sure that your singleton is thread-safe.</p>

<p>Some refuse to use Singletons because they are just glorified globals. But where do you put that data instead, if you need it all through the app? AppDelegate? But.. surprise.. the app delegate is actually a Singleton.</p>

<h3 id="conclusion">Conclusion</h3>

<p>You can like or you can hate the Singleton pattern. Actually, as long as you know what you&rsquo;re doing, I don&rsquo;t see any point in avoiding singletons.</p>

        </article>
        <hr>
        <span class="meta">Posted on April  8, 2014</span>
        <hr />

        </ul>
      </div>
    </div>
  </div>


    <!-- Footer -->
    <hr>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="http://twitter.com/marius_const" title="Twitter">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="http://github.com/mariusc" title="GitHub">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="http://www.linkedin.com/in/constantinescumarius" title="LinkedIn">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="http://stackoverflow.com/users/2912892/marius-constantinescu" title="GitHub">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                </ul>
                <!--
                <p class="copyright text-muted">This site is <a href="http://github.com/mariusc/mariusc.github.io">open source</a>.</p>
            -->
            </div>
        </div>
    </div>
</footer>

    <!-- jQuery -->
<script src="/js/jquery.min.js" type="text/javascript"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js" type="text/javascript"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js" type="text/javascript"></script>
  </body>
</html>
